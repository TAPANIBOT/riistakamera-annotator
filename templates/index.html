<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Riistakamera Annotator</title>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;1,9..40,400&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

    <!-- FULL-SCREEN CANVAS -->
    <main class="viewport" id="viewport">
        <canvas id="image-canvas"></canvas>
        <div class="viewport__overlay" id="loading">Ladataan kuvia...</div>
        <div class="viewport__overlay" id="no-images" style="display: none;">
            Ei kuvia kansiossa.
        </div>
    </main>

    <!-- TOP BAR — compact progress HUD -->
    <header class="hud-top">
        <div class="hud-top__left">
            <span class="hud-logo">RIISTA</span>
            <span class="hud-counter" id="progress-text">0 / 0</span>
            <a href="/dashboard" class="hud-nav-link" title="Analytiikka">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"><rect x="1" y="8" width="3" height="7"/><rect x="6" y="4" width="3" height="11"/><rect x="11" y="1" width="3" height="14"/></svg>
            </a>
        </div>
        <div class="hud-top__center">
            <div class="hud-progress">
                <div class="hud-progress__fill" id="progress-fill"></div>
            </div>
        </div>
        <div class="hud-top__right">
            <span class="hud-badge" id="speed-badge">0/h</span>
            <span class="hud-badge" id="session-time">0:00</span>
            <select class="hud-filter" id="filter-select" title="Suodata">
                <option value="all">Kaikki</option>
                <option value="annotated">Annotoidut</option>
                <option value="unannotated">Annotoimattomat</option>
                <option value="predicted">AI-ennusteet</option>
                <option value="empty">Tyhjät</option>
            </select>
            <button class="hud-icon-btn" id="fetch-btn" title="Hae uudet kuvat sähköpostista">&#9993;</button>
            <button class="hud-icon-btn" id="shortcuts-btn" title="Pikanäppäimet (?)">?</button>
        </div>
    </header>

    <!-- LEFT NAV ARROW -->
    <button class="nav-arrow nav-arrow--left" id="prev-btn" title="Edellinen (P)">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"/></svg>
    </button>

    <!-- RIGHT NAV ARROW -->
    <button class="nav-arrow nav-arrow--right" id="next-btn" title="Seuraava (N)">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 6 15 12 9 18"/></svg>
    </button>

    <!-- AI PREDICTION BADGE (top-right floating) -->
    <div class="hud-prediction" id="prediction-badge" style="display: none;">
        <div class="hud-prediction__header">
            <span class="hud-prediction__label">AI</span>
            <span class="hud-prediction__species" id="pred-species">—</span>
            <span class="hud-prediction__conf" id="pred-conf"></span>
        </div>
        <select class="hud-prediction__override" id="pred-override" title="Vaihda laji"></select>
    </div>

    <!-- BOTTOM ACTION BAR -->
    <footer class="hud-bottom">
        <div class="hud-bottom__species" id="species-bar">
            <button class="sp-pill" data-species="kauris" data-key="1"><kbd>1</kbd>Kauris</button>
            <button class="sp-pill" data-species="peura" data-key="2"><kbd>2</kbd>Peura</button>
            <button class="sp-pill" data-species="janis" data-key="3"><kbd>3</kbd>Jänis</button>
            <button class="sp-pill" data-species="linnut" data-key="4"><kbd>4</kbd>Linnut</button>
            <button class="sp-pill" data-species="supikoira" data-key="5"><kbd>5</kbd>Supi</button>
            <button class="sp-pill" data-species="kettu" data-key="6"><kbd>6</kbd>Kettu</button>
            <button class="sp-pill" data-species="ihminen" data-key="7"><kbd>7</kbd>Ihmi</button>
            <button class="sp-pill" data-species="koira" data-key="8"><kbd>8</kbd>Koira</button>
            <button class="sp-pill" data-species="muu" data-key="9"><kbd>9</kbd>Muu</button>
        </div>
        <div class="hud-bottom__actions">
            <button class="act-btn act-btn--empty" id="empty-btn" title="Tyhjä kuva (E)">
                <kbd>E</kbd>Tyhjä
            </button>
            <button class="act-btn act-btn--confirm" id="save-btn" title="Hyväksy / Tallenna (Enter)">
                <span class="act-btn__icon">&#10003;</span>
                <span class="act-btn__label">Hyväksy</span>
            </button>
        </div>
    </footer>

    <!-- IMAGE NAME (floating bottom-left) -->
    <div class="hud-filename" id="image-name"></div>

    <!-- STATUS TOAST -->
    <div class="hud-toast" id="status-message"></div>

    <!-- TRAINING BANNER -->
    <div class="train-banner" id="train-banner" style="display: none;">
        <span class="train-banner__text" id="train-banner-text"></span>
        <button class="train-banner__btn" id="train-btn">Kouluta malli</button>
        <button class="train-banner__close" id="train-banner-close">&times;</button>
    </div>

    <!-- SHORTCUTS OVERLAY -->
    <div class="shortcuts-overlay" id="shortcuts-overlay" style="display: none;">
        <div class="shortcuts-modal">
            <div class="shortcuts-modal__header">
                <h2>Pikanäppäimet</h2>
                <button class="shortcuts-modal__close" id="shortcuts-close">&times;</button>
            </div>
            <div class="shortcuts-grid">
                <div class="shortcuts-col">
                    <h4>Annotaatio</h4>
                    <div class="shortcut-row"><kbd>Enter / S</kbd><span>Hyväksy / Tallenna</span></div>
                    <div class="shortcut-row"><kbd>1-9</kbd><span>Valitse laji</span></div>
                    <div class="shortcut-row"><kbd>C</kbd><span>Tyhjennä piirto</span></div>
                    <div class="shortcut-row"><kbd>E</kbd><span>Tyhjä kuva</span></div>
                    <div class="shortcut-row"><kbd>Ctrl+Z</kbd><span>Kumoa</span></div>
                </div>
                <div class="shortcuts-col">
                    <h4>Navigointi</h4>
                    <div class="shortcut-row"><kbd>N / &#8594;</kbd><span>Seuraava kuva</span></div>
                    <div class="shortcut-row"><kbd>P / &#8592;</kbd><span>Edellinen kuva</span></div>
                    <div class="shortcut-row"><kbd>Shift+rulla</kbd><span>Zoomaa</span></div>
                    <div class="shortcut-row"><kbd>Shift+vedä</kbd><span>Panoroi</span></div>
                </div>
                <div class="shortcuts-col">
                    <h4>AI-ennusteet</h4>
                    <div class="shortcut-row"><kbd>A</kbd><span>Hyväksy ennuste</span></div>
                    <div class="shortcut-row"><kbd>R</kbd><span>Hylkää ennuste</span></div>
                    <div class="shortcut-row"><kbd>Shift+A</kbd><span>Hyväksy kaikki</span></div>
                    <div class="shortcut-row"><kbd>?</kbd><span>Tämä ohje</span></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Hidden elements for JS compatibility -->
    <span id="image-counter" style="display:none;">0</span>
    <span id="zoom-indicator" style="display:none;">Zoom: 100%</span>

    <script src="/static/script.js"></script>
</body>
</html>
